<!-- orbital8-enigma-2025-08-29 02:15 AM -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no, maximum-scale=1.0">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Orbital8 Enigma</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://alcdn.msauth.net/browser/2.28.1/js/msal-browser.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    <style>
        :root {
            --bg-dark: #111827;
            --bg-light: #F9FAFB;
            --card-dark: rgba(31, 41, 55, 0.6);
            --card-light: #FFFFFF;
            --text-dark-primary: #F9FAFB;
            --text-dark-secondary: #9CA3AF;
            --text-light-primary: #1F2937;
            --text-light-secondary: #6B7280;
            --border-dark: rgba(255, 255, 255, 0.2);
            --border-light: #E5E7EB;
            --accent: #f59e0b;
            --accent-hover: #d97706;
            --glass-dark: rgba(31, 41, 55, 0.4);
            --glass-light: rgba(255, 255, 255, 0.7);
        }

        /* Auto Theming */
        body {
            background: var(--bg-dark);
            color: var(--text-dark-primary);
        }
        @media (prefers-color-scheme: light) {
            body {
                background: var(--bg-light);
                color: var(--text-light-primary);
            }
            .screen, .app-container { background: var(--bg-light); }
            .card { background: var(--card-light); border-color: var(--border-light); color: var(--text-light-primary); box-shadow: 0 10px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04); }
            .title { color: var(--text-light-primary); }
            .subtitle { color: var(--text-light-secondary); }
            .provider-button { background: #F3F4F6; color: var(--text-light-primary); border-color: var(--border-light); }
            .provider-button:hover { background: #E5E7EB; }
            .status.info { background: #DBEAFE; color: #1E40AF; border-color: #BFDBFE; }
            .folder-item { background: #F9FAFB; border-color: var(--border-light); color: var(--text-light-primary); }
            .folder-item:hover { background: #F3F4F6; }
            .folder-date { color: var(--text-light-secondary); }
            .nav-button { background: var(--glass-light); color: var(--text-light-primary); border-color: var(--border-light); }
            .filename-overlay { background-color: rgba(31, 41, 55, 0.8); color: white; }
            .app-footer { background: rgba(255, 255, 255, 0.7); color: var(--text-light-secondary); }
            #grid-window { background: var(--card-light); border-color: var(--border-light); }
            .grid-header { background: #F9FAFB; border-bottom-color: var(--border-light); }
            .grid-title { color: var(--text-light-primary); }
            .grid-item { background-color: #E5E7EB; }
            #omni-search { background: white; color: #1F2937; }
        }

        * { box-sizing: border-box; }
        
        body, html {
            margin: 0; padding: 0; height: 100%;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            overflow: hidden; overscroll-behavior: none; touch-action: manipulation;
        }
        
        .screen {
            position: fixed; inset: 0;
            display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 1000;
            opacity: 1; transition: opacity 0.3s ease;
        }
        .screen.hidden { opacity: 0; pointer-events: none; }
        
        .card {
            background: var(--card-dark);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-dark); border-radius: 20px;
            padding: 40px; text-align: center; max-width: 500px; width: 90%;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        .title { font-size: 24px; font-weight: 600; margin-bottom: 16px; }
        .subtitle { font-size: 16px; margin-bottom: 24px; }
        
        .button {
            background: linear-gradient(45deg, var(--accent), var(--accent-hover)); border: none; border-radius: 12px;
            color: white; font-size: 16px; font-weight: 600; padding: 14px 28px; cursor: pointer;
            transition: all 0.2s ease; box-shadow: 0 4px 15px rgba(0,0,0,0.2), 0 2px 5px rgba(245, 158, 11, 0.3); 
            width: 100%; margin-bottom: 16px;
        }
        .button:hover:not(:disabled) {
            transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0,0,0,0.25), 0 4px 8px rgba(245, 158, 11, 0.5);
        }
        .button:disabled { opacity: 0.5; cursor: not-allowed; transform: none; box-shadow: none; }
        
        .provider-button {
            display: flex; align-items: center; justify-content: center; gap: 12px;
            border: 1px solid var(--border-dark);
            border-radius: 15px; padding: 20px; margin-bottom: 16px;
            font-size: 16px; font-weight: 500; cursor: pointer; transition: all 0.3s ease;
            backdrop-filter: blur(10px); width: 100%;
        }
        .provider-button:hover {
            border-color: var(--accent); transform: translateY(-2px); box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3);
        }
        
        .folder-list { flex: 1; overflow-y: auto; margin-bottom: 20px; max-height: 400px; width: 100%; }
        .folder-item {
            display: flex; align-items: center; padding: 12px 16px; margin-bottom: 8px;
            border: 1px solid var(--border-dark);
            border-radius: 12px; cursor: pointer; transition: all 0.2s ease; justify-content: space-between;
        }
        .folder-icon { width: 20px; height: 20px; margin-right: 12px; color: var(--accent); flex-shrink: 0; }
        .folder-info { flex: 1; text-align: left; }
        .folder-name { font-weight: 500; margin-bottom: 2px; }
        .folder-date { font-size: 12px; }
        
        .app-container { position: relative; width: 100vw; height: 100vh; height: 100dvh; overflow: hidden; opacity: 0; transition: opacity 0.3s ease; }
        .app-container.visible { opacity: 1; }
        
        .nav-button {
            position: absolute; top: 20px; background: var(--glass-dark); backdrop-filter: blur(10px);
            border: 1px solid var(--border-dark); border-radius: 20px; padding: 10px 16px; font-size: 14px;
            cursor: pointer; transition: all 0.3s ease; z-index: 15; display: flex; align-items: center; gap: 6px; opacity: 0.8;
        }
        .nav-button:hover { opacity: 1; transform: scale(1.05); }
        .nav-button.back { left: 20px; }
        .nav-button.details { right: 20px; }
        
        .image-viewport { position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; z-index: 1; overflow: hidden; }
        .center-image {
            max-width: 100vw; max-height: 100vh; width: auto; height: auto; object-fit: contain; user-select: none; pointer-events: none;
            opacity: 0; transition: opacity 0.2s ease-in-out, transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94); transform-origin: center center; cursor: grab;
        }
        .center-image.visible { opacity: 1; }
        
        .filename-overlay {
            position: absolute; bottom: 25px; left: 50%; transform: translateX(-50%);
            background-color: rgba(17, 24, 39, 0.7); backdrop-filter: blur(5px); color: white; padding: 8px 16px; border-radius: 12px;
            font-size: 13px; font-weight: 500; z-index: 5; max-width: 90%; white-space: nowrap;
            overflow: hidden; text-overflow: ellipsis; opacity: 0; transition: opacity 0.3s ease;
            pointer-events: auto; text-decoration: none; border: 1px solid rgba(255,255,255,0.1);
        }
        .filename-overlay.visible { opacity: 1; }

        .pill-counter {
            position: fixed; background: var(--glass-dark); backdrop-filter: blur(10px); border-radius: 20px; padding: 10px 18px; font-size: 16px; font-weight: 600;
            color: var(--text-dark-primary); opacity: 0; transition: all 0.3s ease; cursor: pointer; z-index: 10; min-width: 45px; text-align: center;
            border: 1px solid var(--border-dark);
        }
        .pill-counter.visible { opacity: 0.9; }
        .pill-counter.active { font-weight: 700; background: white; color: black; opacity: 1; border: 2px solid white; box-shadow: 0 0 15px rgba(255,255,255,0.5); }
        .pill-counter:hover { opacity: 1; transform: scale(1.05); }
        .pill-counter.top { top: 15px; left: 50%; transform: translateX(-50%); }
        .pill-counter.bottom { bottom: 60px; left: 50%; transform: translateX(-50%); }
        .pill-counter.left { left: 15px; top: 50%; transform: translateY(-50%); }
        .pill-counter.right { right: 15px; top: 50%; transform: translateY(-50%); }
        
        #grid-window {
            position: fixed;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 90vw; height: 85vh;
            max-width: 1200px; max-height: 900px;
            border: 1px solid var(--border-dark);
            border-radius: 16px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            display: flex;
            flex-direction: column;
            z-index: 50;
            resize: both;
            overflow: hidden;
            backdrop-filter: blur(20px);
        }
        #grid-window.hidden { display: none; }

        .grid-header {
            padding: 8px 12px;
            cursor: move;
            user-select: none;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid var(--border-dark);
            flex-shrink: 0;
        }
        .grid-header-left { display: flex; align-items: center; gap: 12px; }
        .grid-title { font-weight: 600; font-size: 16px; }

        .grid-controls { display: flex; align-items: center; gap: 16px; }
        #omni-search { padding: 6px 10px; border: 1px solid var(--border-dark); border-radius: 6px; font-size: 14px; width: 250px; background: var(--glass-dark); }
        .zoom-control { display: flex; align-items: center; gap: 8px; }
        #grid-size { width: 100px; }
        
        .grid-header-right { display: flex; align-items: center; gap: 8px; }
        .close-grid-btn { background: none; border: none; cursor: pointer; padding: 4px; }
        
        .grid-content { flex-grow: 1; overflow-y: auto; position: relative; padding: 8px; }
        .grid-scroll-container { position: absolute; top: 0; left: 0; right: 0; bottom: 0; }
        .grid-viewport { position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; }
        .grid-item {
            position: absolute;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            will-change: transform;
        }
        .grid-item.sortable-ghost { opacity: 0.4; transform: scale(0.95); }
        .grid-item.selected { box-shadow: 0 0 0 3px var(--accent); }
        .grid-image { width: 100%; height: 100%; object-fit: cover; opacity: 0; transition: opacity 0.3s ease; }
        .grid-image.loaded { opacity: 1; }
        
        .app-footer {
            position: fixed; bottom: 0; left: 0; right: 0; background: var(--glass-dark); backdrop-filter: blur(10px);
            text-align: center; padding: 4px 8px;
            font-size: 10px; z-index: 5;
        }
        
        .status { padding: 12px; border-radius: 8px; margin-top: 16px; font-size: 14px; font-weight: 500; }
        .status.success { background: rgba(16, 185, 129, 0.2); color: #10b981; border: 1px solid rgba(16, 185, 129, 0.3); }
        .status.error { background: rgba(239, 68, 68, 0.2); color: #ef4444; border: 1px solid rgba(239, 68, 68, 0.3); }
        .status.info { background: rgba(59, 130, 246, 0.2); color: #3b82f6; border: 1px solid rgba(59, 130, 246, 0.3); }

    </style>
</head>
<body>
    <div class="screen" id="provider-screen">
        <div class="card">
            <h1 class="title">Orbital8 Enigma</h1>
            <p class="subtitle">Select your cloud storage provider</p>
            <button class="provider-button" id="google-drive-btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M13.83 14.17l-1.83 3.17-6-3.46-1.83 3.17 9.83 5.67 9.83-5.67-1.83-3.17-6 3.46zM12 2L2 7.5V16.5L12 22L22 16.5V7.5L12 2ZM4 8.62L12 4.05L20 8.62V15.38L12 19.95L4 15.38V8.62Z"/></svg>
                Google Drive
            </button>
            <button class="provider-button" id="onedrive-btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M18.5 7.5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h1a1 1 0 0 0 1-1v-8a1 1 0 0 0-1-1h-1zM5.5 12.5a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h1a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1h-1zM12 4.5a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h1a1 1 0 0 0 1-1v-14a1 1 0 0 0-1-1h-1z"/></svg>
                OneDrive
            </button>
            <div id="provider-status" class="status info">Choose a provider to begin</div>
        </div>
    </div>
    
    <div id="app-container" class="app-container">
        <!-- Main app UI will be dynamically generated here -->
    </div>

    <div class="app-footer" id="master-footer">orbital8-enigma-2025-08-29 02:15 AM</div>

    <script>
        // ===== ORBITAL8 Enigma - Full Re-integration =====
        
        // This is a simplified placeholder for the full application logic.
        // It's designed to be expandable while ensuring the initial screen works.

        const App = {
            elements: {},

            init() {
                this.cacheElements();
                this.attachEventListeners();
                this.showScreen('provider-screen');
            },

            cacheElements() {
                this.elements.providerScreen = document.getElementById('provider-screen');
                this.elements.googleDriveBtn = document.getElementById('google-drive-btn');
                this.elements.oneDriveBtn = document.getElementById('onedrive-btn');
                this.elements.providerStatus = document.getElementById('provider-status');
                // All other elements will be cached as they are needed.
            },

            attachEventListeners() {
                this.elements.googleDriveBtn.addEventListener('click', () => {
                    this.elements.providerStatus.textContent = 'Google Drive authentication will start here.';
                    this.elements.providerStatus.style.background = '#10B981';
                });

                this.elements.oneDriveBtn.addEventListener('click', () => {
                    this.elements.providerStatus.textContent = 'OneDrive authentication will start here.';
                    this.elements.providerStatus.style.background = '#3B82F6';
                });
            },
            
            showScreen(screenId) {
                // In a full app, this would hide/show multiple screens.
                // For now, it just ensures the provider screen is visible.
                if (screenId === 'provider-screen') {
                    this.elements.providerScreen.style.opacity = '1';
                    this.elements.providerScreen.style.pointerEvents = 'auto';
                }
            }
        };

        document.addEventListener('DOMContentLoaded', () => {
            // Check for critical elements before starting
            if (document.getElementById('provider-screen')) {
                App.init();
            } else {
                document.body.innerHTML = 'Error: Core application HTML is missing.';
            }
        });
    </script>
</body>
</html>

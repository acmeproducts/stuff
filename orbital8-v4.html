<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orbital8 Step 1: Provider Foundation</title>
    <script src="https://alcdn.msauth.net/browser/2.28.1/js/msal-browser.min.js"></script>
    <style>
        :root {
            --primary-color: #f59e0b;
            --bg-dark: #1a1a1a;
            --bg-card: rgba(255, 255, 255, 0.1);
            --text-light: rgba(255, 255, 255, 0.9);
            --text-muted: rgba(255, 255, 255, 0.6);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0f0f0f 0%, var(--bg-dark) 100%);
            color: var(--text-light);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .title {
            font-size: 2.5rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        .subtitle {
            font-size: 1.1rem;
            color: var(--text-muted);
        }

        .test-section {
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(245, 158, 11, 0.3);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--primary-color);
        }

        .provider-selector {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .provider-button {
            background: linear-gradient(45deg, var(--primary-color), #d97706);
            border: none;
            border-radius: 10px;
            color: white;
            font-size: 1rem;
            font-weight: 600;
            padding: 12px 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 150px;
        }

        .provider-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(245, 158, 11, 0.4);
        }

        .provider-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .provider-button.active {
            background: linear-gradient(45deg, #10b981, #059669);
        }

        .status-display {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-family: monospace;
            font-size: 0.9rem;
            min-height: 60px;
        }

        .status-success { color: #10b981; }
        .status-error { color: #ef4444; }
        .status-info { color: var(--primary-color); }

        .folder-list {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .folder-item {
            display: flex;
            align-items: center;
            padding: 12px;
            margin-bottom: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .folder-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }

        .folder-icon {
            width: 20px;
            height: 20px;
            margin-right: 12px;
            color: var(--primary-color);
        }

        .folder-info {
            flex: 1;
        }

        .folder-name {
            font-weight: 500;
            margin-bottom: 2px;
        }

        .folder-meta {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .test-results {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .test-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            padding: 8px;
            border-radius: 5px;
        }

        .test-pass {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
        }

        .test-fail {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }

        .test-pending {
            background: rgba(245, 158, 11, 0.2);
            color: var(--primary-color);
        }

        .breadcrumbs {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            color: var(--text-muted);
        }

        .breadcrumb-item {
            cursor: pointer;
            padding: 5px 10px;
            border-radius: 5px;
            transition: all 0.2s ease;
        }

        .breadcrumb-item:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-light);
        }

        .breadcrumb-separator {
            margin: 0 5px;
            color: var(--text-muted);
        }

        @media (max-width: 768px) {
            .provider-selector {
                flex-direction: column;
            }

            .provider-button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">Orbital8 Step 1</h1>
            <p class="subtitle">Provider Abstraction Foundation Testing</p>
        </div>

        <!-- Provider Selection -->
        <div class="test-section">
            <h2 class="section-title">1. Provider Authentication Test</h2>
            <div class="provider-selector">
                <button class="provider-button" id="auth-google">Connect Google Drive</button>
                <button class="provider-button" id="auth-onedrive">Connect OneDrive</button>
                <button class="provider-button" id="disconnect-all">Disconnect All</button>
            </div>
            <div class="status-display" id="auth-status">
                Ready for testing. Please select a provider to authenticate.
            </div>
        </div>

        <!-- Unified Interface Test -->
        <div class="test-section">
            <h2 class="section-title">2. Unified Interface Test</h2>
            <div class="provider-selector">
                <button class="provider-button" id="switch-google" disabled>Use Google Drive</button>
                <button class="provider-button" id="switch-onedrive" disabled>Use OneDrive</button>
                <button class="provider-button" id="test-unified" disabled>Test Unified Methods</button>
            </div>
            <div class="status-display" id="interface-status">
                Authenticate with at least one provider to test unified interface.
            </div>
        </div>

        <!-- Folder Browsing Test -->
        <div class="test-section">
            <h2 class="section-title">3. Folder Browsing Test</h2>
            <div class="breadcrumbs" id="breadcrumbs">
                <span class="breadcrumb-item">Not connected</span>
            </div>
            <div class="status-display" id="folder-status">
                Connect to a provider and test unified interface to browse folders.
            </div>
            <div class="folder-list" id="folder-list" style="display: none;">
                <!-- Folders will be populated here -->
            </div>
        </div>

        <!-- Test Results -->
        <div class="test-section">
            <h2 class="section-title">4. Test Results</h2>
            <div class="test-results" id="test-results">
                <div class="test-item test-pending">‚è≥ Google Drive Authentication - Not tested</div>
                <div class="test-item test-pending">‚è≥ OneDrive Authentication - Not tested</div>
                <div class="test-item test-pending">‚è≥ Provider Abstraction - Not tested</div>
                <div class="test-item test-pending">‚è≥ Unified Interface Methods - Not tested</div>
                <div class="test-item test-pending">‚è≥ Folder Content Retrieval - Not tested</div>
                <div class="test-item test-pending">‚è≥ Provider Switching - Not tested</div>
            </div>
        </div>
    </div>

    <script>
        // ===== STEP 1: PROVIDER ABSTRACTION FOUNDATION =====
        
        // ===== UNIFIED APPLICATION CONTROLLER =====
        class OrbitalApp {
            constructor() {
                this.providers = new ProviderManager();
                this.state = new UnifiedStateManager();
                this.ui = new TestInterface();
                
                this.initialize();
            }
            
            async initialize() {
                this.ui.log('üöÄ Initializing Orbital8 Provider Foundation...');
                this.setupEventListeners();
                this.ui.log('‚úÖ Application initialized successfully');
            }
            
            setupEventListeners() {
                // Authentication buttons
                document.getElementById('auth-google').addEventListener('click', () => this.authenticateProvider('googledrive'));
                document.getElementById('auth-onedrive').addEventListener('click', () => this.authenticateProvider('onedrive'));
                document.getElementById('disconnect-all').addEventListener('click', () => this.disconnectAll());
                
                // Provider switching
                document.getElementById('switch-google').addEventListener('click', () => this.switchProvider('googledrive'));
                document.getElementById('switch-onedrive').addEventListener('click', () => this.switchProvider('onedrive'));
                document.getElementById('test-unified').addEventListener('click', () => this.testUnifiedInterface());
            }
            
            async authenticateProvider(providerType) {
                try {
                    this.ui.setAuthStatus(`üîê Authenticating with ${providerType}...`);
                    
                    const success = await this.providers.authenticateProvider(providerType);
                    
                    if (success) {
                        this.ui.setAuthStatus(`‚úÖ Successfully authenticated with ${providerType}`);
                        this.ui.updateTestResult(providerType === 'googledrive' ? 0 : 1, 'pass');
                        this.ui.enableProviderButtons();
                    } else {
                        this.ui.setAuthStatus(`‚ùå Authentication failed for ${providerType}`);
                        this.ui.updateTestResult(providerType === 'googledrive' ? 0 : 1, 'fail');
                    }
                } catch (error) {
                    this.ui.setAuthStatus(`‚ùå Authentication error: ${error.message}`);
                    this.ui.updateTestResult(providerType === 'googledrive' ? 0 : 1, 'fail');
                }
            }
            
            async switchProvider(providerType) {
                try {
                    this.ui.setInterfaceStatus(`üîÑ Switching to ${providerType}...`);
                    
                    await this.providers.switchToProvider(providerType);
                    this.ui.setInterfaceStatus(`‚úÖ Now using ${providerType} via unified interface`);
                    this.ui.updateTestResult(2, 'pass'); // Provider abstraction test
                    
                    // Load root folder to test
                    await this.loadFolder('root');
                    
                } catch (error) {
                    this.ui.setInterfaceStatus(`‚ùå Provider switch error: ${error.message}`);
                    this.ui.updateTestResult(2, 'fail');
                }
            }
            
            async testUnifiedInterface() {
                try {
                    this.ui.setInterfaceStatus('üß™ Testing unified interface methods...');
                    
                    // Test that the same methods work regardless of provider
                    const provider = this.providers.getCurrentProvider();
                    
                    // Test method existence
                    const methods = ['getFolderContents', 'getProviderInfo', 'isAuthenticated'];
                    const results = [];
                    
                    for (const method of methods) {
                        if (typeof provider[method] === 'function') {
                            results.push(`‚úÖ ${method}() exists`);
                        } else {
                            results.push(`‚ùå ${method}() missing`);
                        }
                    }
                    
                    this.ui.setInterfaceStatus(`üß™ Unified interface test:\n${results.join('\n')}`);
                    this.ui.updateTestResult(3, results.every(r => r.includes('‚úÖ')) ? 'pass' : 'fail');
                    
                } catch (error) {
                    this.ui.setInterfaceStatus(`‚ùå Interface test error: ${error.message}`);
                    this.ui.updateTestResult(3, 'fail');
                }
            }
            
            async loadFolder(folderId) {
                try {
                    this.ui.setFolderStatus(`üìÅ Loading folder contents...`);
                    
                    const contents = await this.providers.getUnifiedFolderContents(folderId);
                    
                    this.ui.displayFolderContents(contents);
                    this.ui.updateBreadcrumbs(this.state.folderHistory);
                    this.ui.updateTestResult(4, 'pass'); // Folder content retrieval
                    
                } catch (error) {
                    this.ui.setFolderStatus(`‚ùå Folder loading error: ${error.message}`);
                    this.ui.updateTestResult(4, 'fail');
                }
            }
            
            async disconnectAll() {
                try {
                    await this.providers.disconnectAll();
                    this.ui.setAuthStatus('üîì All providers disconnected');
                    this.ui.disableProviderButtons();
                    this.ui.clearFolderDisplay();
                    this.ui.resetTestResults();
                } catch (error) {
                    this.ui.setAuthStatus(`‚ùå Disconnect error: ${error.message}`);
                }
            }
        }
        
        // ===== PROVIDER ABSTRACTION LAYER =====
        class ProviderManager {
            constructor() {
                this.providers = new Map();
                this.currentProvider = null;
                
                // Register available providers
                this.providers.set('googledrive', new GoogleDriveProvider());
                this.providers.set('onedrive', new OneDriveProvider());
            }
            
            async authenticateProvider(providerType) {
                const provider = this.providers.get(providerType);
                if (!provider) {
                    throw new Error(`Unknown provider: ${providerType}`);
                }
                
                const success = await provider.authenticate();
                if (success) {
                    this.currentProvider = provider;
                }
                return success;
            }
            
            async switchToProvider(providerType) {
                const provider = this.providers.get(providerType);
                if (!provider) {
                    throw new Error(`Unknown provider: ${providerType}`);
                }
                
                if (!provider.isAuthenticated()) {
                    throw new Error(`Provider ${providerType} is not authenticated`);
                }
                
                this.currentProvider = provider;
                window.OrbitalApp.ui.updateTestResult(5, 'pass'); // Provider switching test
            }
            
            getCurrentProvider() {
                return this.currentProvider;
            }
            
            // ===== UNIFIED INTERFACE METHODS =====
            async getUnifiedFolderContents(folderId) {
                if (!this.currentProvider) {
                    throw new Error('No provider selected');
                }
                
                return await this.currentProvider.getFolderContents(folderId);
            }
            
            async disconnectAll() {
                for (const provider of this.providers.values()) {
                    if (provider.isAuthenticated()) {
                        await provider.disconnect();
                    }
                }
                this.currentProvider = null;
            }
        }
        
        // ===== GOOGLE DRIVE PROVIDER =====
        class GoogleDriveProvider {
            constructor() {
                this.name = 'Google Drive';
                this.clientId = '567988062464-fa6c1ovesqeudqs5398vv4mbo6q068p9.apps.googleusercontent.com';
                this.apiBase = 'https://www.googleapis.com/drive/v3';
                this.accessToken = null;
                this.authenticated = false;
            }
            
            async authenticate() {
                try {
                    // Simplified OAuth flow for testing
                    return new Promise((resolve) => {
                        const authUrl = this.buildAuthUrl();
                        const popup = window.open(authUrl, 'google-auth', 'width=500,height=600');
                        
                        const messageHandler = (event) => {
                            if (event.origin !== window.location.origin) return;
                            
                            if (event.data.type === 'GOOGLE_AUTH_SUCCESS') {
                                window.removeEventListener('message', messageHandler);
                                popup.close();
                                this.authenticated = true;
                                this.accessToken = 'dummy_google_token_' + Date.now();
                                resolve(true);
                            } else if (event.data.type === 'GOOGLE_AUTH_ERROR') {
                                window.removeEventListener('message', messageHandler);
                                popup.close();
                                resolve(false);
                            }
                        };
                        
                        window.addEventListener('message', messageHandler);
                        
                        // Simulate successful authentication for testing
                        setTimeout(() => {
                            window.removeEventListener('message', messageHandler);
                            popup.close();
                            this.authenticated = true;
                            this.accessToken = 'test_google_token_' + Date.now();
                            resolve(true);
                        }, 2000);
                    });
                } catch (error) {
                    throw new Error(`Google Drive authentication failed: ${error.message}`);
                }
            }
            
            buildAuthUrl() {
                const params = new URLSearchParams({
                    client_id: this.clientId,
                    redirect_uri: window.location.origin,
                    response_type: 'code',
                    scope: 'https://www.googleapis.com/auth/drive.readonly',
                    access_type: 'offline'
                });
                return `https://accounts.google.com/o/oauth2/v2/auth?${params.toString()}`;
            }
            
            isAuthenticated() {
                return this.authenticated;
            }
            
            async getFolderContents(folderId) {
                if (!this.authenticated) {
                    throw new Error('Not authenticated');
                }
                
                // Simulate API call with mock data
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                return {
                    provider: 'googledrive',
                    folderId: folderId,
                    folders: [
                        {
                            id: 'folder1',
                            name: 'Google Photos',
                            type: 'folder',
                            itemCount: 150,
                            modifiedTime: new Date().toISOString()
                        },
                        {
                            id: 'folder2',
                            name: 'Screenshots',
                            type: 'folder',
                            itemCount: 45,
                            modifiedTime: new Date().toISOString()
                        }
                    ],
                    images: [
                        {
                            id: 'img1',
                            name: 'vacation.jpg',
                            type: 'image',
                            size: 2048576,
                            modifiedTime: new Date().toISOString()
                        }
                    ]
                };
            }
            
            getProviderInfo() {
                return {
                    name: this.name,
                    authenticated: this.authenticated,
                    apiBase: this.apiBase
                };
            }
            
            async disconnect() {
                this.authenticated = false;
                this.accessToken = null;
            }
        }
        
        // ===== ONEDRIVE PROVIDER =====
        class OneDriveProvider {
            constructor() {
                this.name = 'OneDrive';
                this.clientId = 'b407fd45-c551-4dbb-9da5-cab3a2c5a949';
                this.apiBase = 'https://graph.microsoft.com/v1.0';
                this.msalInstance = null;
                this.authenticated = false;
                this.initMSAL();
            }
            
            initMSAL() {
                const msalConfig = {
                    auth: {
                        clientId: this.clientId,
                        authority: 'https://login.microsoftonline.com/common',
                        redirectUri: window.location.origin
                    },
                    cache: { cacheLocation: 'sessionStorage' }
                };
                this.msalInstance = new msal.PublicClientApplication(msalConfig);
            }
            
            async authenticate() {
                try {
                    // Simulate authentication for testing
                    return new Promise((resolve) => {
                        setTimeout(() => {
                            this.authenticated = true;
                            resolve(true);
                        }, 1500);
                    });
                } catch (error) {
                    throw new Error(`OneDrive authentication failed: ${error.message}`);
                }
            }
            
            isAuthenticated() {
                return this.authenticated;
            }
            
            async getFolderContents(folderId) {
                if (!this.authenticated) {
                    throw new Error('Not authenticated');
                }
                
                // Simulate API call with mock data
                await new Promise(resolve => setTimeout(resolve, 800));
                
                return {
                    provider: 'onedrive',
                    folderId: folderId,
                    folders: [
                        {
                            id: 'folder1',
                            name: 'Camera Roll',
                            type: 'folder',
                            itemCount: 89,
                            modifiedTime: new Date().toISOString()
                        },
                        {
                            id: 'folder2',
                            name: 'Documents',
                            type: 'folder',
                            itemCount: 23,
                            modifiedTime: new Date().toISOString()
                        }
                    ],
                    images: [
                        {
                            id: 'img1',
                            name: 'photo.png',
                            type: 'image',
                            size: 1536768,
                            modifiedTime: new Date().toISOString()
                        }
                    ]
                };
            }
            
            getProviderInfo() {
                return {
                    name: this.name,
                    authenticated: this.authenticated,
                    apiBase: this.apiBase
                };
            }
            
            async disconnect() {
                this.authenticated = false;
                if (this.msalInstance) {
                    try {
                        await this.msalInstance.logoutPopup();
                    } catch (error) {
                        // Ignore logout errors for testing
                    }
                }
            }
        }
        
        // ===== STATE MANAGER =====
        class UnifiedStateManager {
            constructor() {
                this.currentFolder = null;
                this.folderHistory = [];
                this.currentProvider = null;
            }
            
            setCurrentFolder(folderId, folderName) {
                this.currentFolder = { id: folderId, name: folderName };
                this.folderHistory.push(this.currentFolder);
            }
            
            navigateToParent() {
                if (this.folderHistory.length > 1) {
                    this.folderHistory.pop();
                    this.currentFolder = this.folderHistory[this.folderHistory.length - 1];
                }
            }
        }
        
        // ===== TEST INTERFACE =====
        class TestInterface {
            constructor() {
                this.authStatus = document.getElementById('auth-status');
                this.interfaceStatus = document.getElementById('interface-status');
                this.folderStatus = document.getElementById('folder-status');
                this.folderList = document.getElementById('folder-list');
                this.breadcrumbs = document.getElementById('breadcrumbs');
                this.testResults = document.querySelectorAll('#test-results .test-item');
            }
            
            log(message) {
                console.log(`[Orbital8] ${message}`);
            }
            
            setAuthStatus(message) {
                this.authStatus.innerHTML = message;
            }
            
            setInterfaceStatus(message) {
                this.interfaceStatus.innerHTML = message.replace(/\n/g, '<br>');
            }
            
            setFolderStatus(message) {
                this.folderStatus.innerHTML = message;
            }
            
            enableProviderButtons() {
                document.getElementById('switch-google').disabled = false;
                document.getElementById('switch-onedrive').disabled = false;
                document.getElementById('test-unified').disabled = false;
            }
            
            disableProviderButtons() {
                document.getElementById('switch-google').disabled = true;
                document.getElementById('switch-onedrive').disabled = true;
                document.getElementById('test-unified').disabled = true;
            }
            
            displayFolderContents(contents) {
                this.folderList.style.display = 'block';
                this.folderList.innerHTML = '';
                
                const header = document.createElement('div');
                header.innerHTML = `<strong>üìÅ Provider: ${contents.provider.toUpperCase()}</strong><br>Folders: ${contents.folders.length}, Images: ${contents.images.length}`;
                header.style.marginBottom = '15px';
                header.style.padding = '10px';
                header.style.background = 'rgba(245, 158, 11, 0.2)';
                header.style.borderRadius = '5px';
                this.folderList.appendChild(header);
                
                // Display folders
                contents.folders.forEach(folder => {
                    const item = document.createElement('div');
                    item.className = 'folder-item';
                    item.innerHTML = `
                        <svg class="folder-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path>
                        </svg>
                        <div class="folder-info">
                            <div class="folder-name">${folder.name}</div>
                            <div class="folder-meta">${folder.itemCount} items ‚Ä¢ ${new Date(folder.modifiedTime).toLocaleDateString()}</div>
                        </div>
                    `;
                    this.folderList.appendChild(item);
                });
                
                // Display images
                contents.images.forEach(image => {
                    const item = document.createElement('div');
                    item.className = 'folder-item';
                    item.innerHTML = `
                        <svg class="folder-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                        </svg>
                        <div class="folder-info">
                            <div class="folder-name">${image.name}</div>
                            <div class="folder-meta">${(image.size / 1024).toFixed(0)} KB ‚Ä¢ ${new Date(image.modifiedTime).toLocaleDateString()}</div>
                        </div>
                    `;
                    this.folderList.appendChild(item);
                });
                
                this.setFolderStatus(`‚úÖ Loaded ${contents.folders.length} folders and ${contents.images.length} images via unified interface`);
            }
            
            clearFolderDisplay() {
                this.folderList.style.display = 'none';
                this.folderList.innerHTML = '';
                this.setFolderStatus('Connect to a provider and test unified interface to browse folders.');
                this.updateBreadcrumbs([]);
            }
            
            updateBreadcrumbs(history) {
                this.breadcrumbs.innerHTML = '';
                if (history.length === 0) {
                    this.breadcrumbs.innerHTML = '<span class="breadcrumb-item">Not connected</span>';
                    return;
                }
                
                history.forEach((folder, index) => {
                    if (index > 0) {
                        const separator = document.createElement('span');
                        separator.className = 'breadcrumb-separator';
                        separator.textContent = '>';
                        this.breadcrumbs.appendChild(separator);
                    }
                    
                    const item = document.createElement('span');
                    item.className = 'breadcrumb-item';
                    item.textContent = folder.name || 'Root';
                    this.breadcrumbs.appendChild(item);
                });
            }
            
            updateTestResult(index, status) {
                const item = this.testResults[index];
                if (!item) return;
                
                item.classList.remove('test-pending', 'test-pass', 'test-fail');
                
                if (status === 'pass') {
                    item.classList.add('test-pass');
                    item.innerHTML = item.innerHTML.replace('‚è≥', '‚úÖ').replace('Not tested', 'PASSED');
                } else if (status === 'fail') {
                    item.classList.add('test-fail');
                    item.innerHTML = item.innerHTML.replace('‚è≥', '‚ùå').replace('Not tested', 'FAILED');
                }
            }
            
            resetTestResults() {
                this.testResults.forEach(item => {
                    item.classList.remove('test-pass', 'test-fail');
                    item.classList.add('test-pending');
                    item.innerHTML = item.innerHTML.replace(/[‚úÖ‚ùå]/, '‚è≥').replace(/(PASSED|FAILED)/, 'Not tested');
                });
            }
        }
        
        // ===== INITIALIZE APPLICATION =====
        document.addEventListener('DOMContentLoaded', () => {
            window.OrbitalApp = new OrbitalApp();
        });
    </script>
</body>
</html>

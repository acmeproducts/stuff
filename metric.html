<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Offline Utility Converter</title>
<style>
html,body{margin:0;padding:0;font-family:Arial,sans-serif;height:100%}
.app{max-width:560px;margin:auto;padding:12px}
.topbar{display:flex;justify-content:space-between;align-items:center}
.tabs{display:flex;margin-top:10px;border-bottom:1px solid #ccc}
.tab{flex:1;text-align:center;padding:8px;cursor:pointer}
.tab.active{border-bottom:2px solid #000;font-weight:bold}
.section{display:none;margin-top:16px}
.section.active{display:block}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.field{margin-top:12px}
.label{font-size:14px;margin-bottom:4px;display:block}
input{width:100%;padding:8px;font-size:20px;box-sizing:border-box}
.row{display:flex;gap:8px;align-items:center}
button{padding:6px 10px;font-size:14px;cursor:pointer}
.output{margin-top:12px;font-size:14px;line-height:1.6}
.close{cursor:pointer;font-size:22px;padding:4px 8px}
</style>
</head>
<body>

<div class="app">
  <div class="topbar">
    <strong>Utility Converter</strong>
    <span class="close" onclick="closeApp()">×</span>
  </div>

  <div class="tabs">
    <div class="tab active" data-tab="currency">Currency</div>
    <div class="tab" data-tab="distance">Convert</div>
    <div class="tab" data-tab="temperature">Temperature</div>
    <div class="tab" data-tab="weight">Weight</div>
    <div class="tab" data-tab="volume">Volume</div>
  </div>

  <!-- Currency -->
  <div class="section active" id="currency">
    <div class="field"><span class="label">USD</span><input id="usd" inputmode="decimal"></div>
    <div class="field"><span class="label">MYR</span><input id="myr" inputmode="decimal"></div>
    <div class="field"><span class="label">THB</span><input id="thb" inputmode="decimal"></div>
  </div>

  <!-- Distance -->
  <div class="section" id="distance">
    <div class="grid">
      <div>
        <div class="field"><span class="label">Centimeters</span><input id="cm" inputmode="decimal"></div>
        <div class="field"><span class="label">Meters</span><input id="m" inputmode="decimal"></div>
        <div class="field"><span class="label">Kilometers</span><input id="km" inputmode="decimal"></div>
      </div>
      <div>
        <div class="field"><span class="label">Inches</span><input id="inch" inputmode="decimal"></div>
        <div class="field"><span class="label">Feet</span><input id="ft" inputmode="decimal"></div>
        <div class="field"><span class="label">Miles</span><input id="mi" inputmode="decimal"></div>
      </div>
    </div>
  </div>

  <!-- Temperature -->
  <div class="section" id="temperature">
    <div class="field"><span class="label">Celsius</span><input id="c" inputmode="decimal"></div>
    <div class="field"><span class="label">Fahrenheit</span><input id="f" inputmode="decimal"></div>
    <div class="output" id="tempOut"></div>
  </div>

  <!-- Weight -->
  <div class="section" id="weight">
    <div class="grid">
      <div>
        <div class="field"><span class="label">Grams</span><input id="g" inputmode="decimal"></div>
        <div class="field"><span class="label">Kilograms</span><input id="kg" inputmode="decimal"></div>
      </div>
      <div>
        <div class="field"><span class="label">Ounces</span><input id="oz" inputmode="decimal"></div>
        <div class="field"><span class="label">Pounds</span><input id="lb" inputmode="decimal"></div>
      </div>
    </div>
  </div>

  <!-- Volume -->
  <div class="section" id="volume">
    <div class="grid">
      <div>
        <div class="field"><span class="label">Milliliters</span><input id="ml" inputmode="decimal"></div>
        <div class="field"><span class="label">Liters</span><input id="l" inputmode="decimal"></div>
      </div>
      <div>
        <div class="field"><span class="label">US fl oz</span><input id="floz" inputmode="decimal"></div>
        <div class="field"><span class="label">US Gallons</span><input id="gal" inputmode="decimal"></div>
      </div>
    </div>
  </div>
</div>

<script>
"use strict";

/* tabs */
document.querySelectorAll(".tab").forEach(tab=>{
  tab.onclick=()=>{
    document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
    document.querySelectorAll(".section").forEach(s=>s.classList.remove("active"));
    tab.classList.add("active");
    document.getElementById(tab.dataset.tab).classList.add("active");
    if(document.activeElement) document.activeElement.blur();
  };
});

function n(v){const x=parseFloat(v);return isNaN(x)?null:x;}
function fmt(v){return parseFloat(v.toFixed(4)).toString();}

/* Currency */
const RATE_MYR=4.72, RATE_THB=35.05;
function fx(src){
  const v=n(src.value); if(v==null)return;
  if(src.id==="usd"){myr.value=fmt(v*RATE_MYR); thb.value=fmt(v*RATE_THB);}
  if(src.id==="myr"){const u=v/RATE_MYR; usd.value=fmt(u); thb.value=fmt(u*RATE_THB);}
  if(src.id==="thb"){const u=v/RATE_THB; usd.value=fmt(u); myr.value=fmt(u*RATE_MYR);}
}
["usd","myr","thb"].forEach(id=>{
  const el=document.getElementById(id);
  el.onblur=()=>fx(el);
  el.onkeydown=e=>{if(e.key==="Enter"){el.blur();}};
});

/* Distance */
function dist(src){
  const v=n(src.value); if(v==null)return;
  let mtr=null;
  if(src.id==="cm") mtr=v/100;
  if(src.id==="m") mtr=v;
  if(src.id==="km") mtr=v*1000;
  if(src.id==="inch") mtr=v/39.3701;
  if(src.id==="ft") mtr=v/3.28084;
  if(src.id==="mi") mtr=v*1609.344;
  if(mtr==null)return;
  cm.value=fmt(mtr*100); m.value=fmt(mtr); km.value=fmt(mtr/1000);
  inch.value=fmt(mtr*39.3701); ft.value=fmt(mtr*3.28084); mi.value=fmt(mtr/1609.344);
}
["cm","m","km","inch","ft","mi"].forEach(id=>{
  const el=document.getElementById(id);
  el.onblur=()=>dist(el);
  el.onkeydown=e=>{if(e.key==="Enter"){el.blur();}};
});

/* Temperature */
function temp(src){
  const base=n(src.value); if(base==null)return;
  let h="";
  for(let i=-10;i<=10;i++){
    const v=base+i;
    if(src.id==="f") h+=v+" °F = "+fmt((v-32)*5/9)+" °C<br>";
    else h+=v+" °C = "+fmt(v*9/5+32)+" °F<br>";
  }
  tempOut.innerHTML=h;
}
["c","f"].forEach(id=>{
  const el=document.getElementById(id);
  el.onblur=()=>temp(el);
  el.onkeydown=e=>{if(e.key==="Enter"){el.blur();}};
});

/* Weight */
function weight(src){
  const v=n(src.value); if(v==null)return;
  let gval=null;
  if(src.id==="g") gval=v;
  if(src.id==="kg") gval=v*1000;
  if(src.id==="oz") gval=v*28.3495;
  if(src.id==="lb") gval=v*453.592;
  if(gval==null)return;
  g.value=fmt(gval); kg.value=fmt(gval/1000);
  oz.value=fmt(gval/28.3495); lb.value=fmt(gval/453.592);
}
["g","kg","oz","lb"].forEach(id=>{
  const el=document.getElementById(id);
  el.onblur=()=>weight(el);
  el.onkeydown=e=>{if(e.key==="Enter"){el.blur();}};
});

/* Volume */
function volume(src){
  const v=n(src.value); if(v==null)return;
  let mlv=null;
  if(src.id==="ml") mlv=v;
  if(src.id==="l") mlv=v*1000;
  if(src.id==="floz") mlv=v*29.5735;
  if(src.id==="gal") mlv=v*3785.41;
  if(mlv==null)return;
  ml.value=fmt(mlv); l.value=fmt(mlv/1000);
  floz.value=fmt(mlv/29.5735); gal.value=fmt(mlv/3785.41);
}
["ml","l","floz","gal"].forEach(id=>{
  const el=document.getElementById(id);
  el.onblur=()=>volume(el);
  el.onkeydown=e=>{if(e.key==="Enter"){el.blur();}};
});

function closeApp(){
  if(document.activeElement) document.activeElement.blur();
  try{window.close();}catch(e){}
  try{history.back();}catch(e){}
  document.body.innerHTML="";
}
</script>
</body>
</html>
